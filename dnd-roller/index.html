<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Dice Roller</title>
    <meta name="description" content="A stylish digital dice roller for Dungeons & Dragons with statistics tracking and character sheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VDZNRELZ6H"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-VDZNRELZ6H');
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>D&D Dice Roller</h1>
            <p>Roll your dice with style and track your luck!</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="dice-roller">Dice Roller</button>
            <button class="tab-btn" data-tab="character-sheet">Character Sheet</button>
            <button class="tab-btn" data-tab="ai-dm">AI DM</button>
            <button class="tab-btn" data-tab="character-generator">Character Gen</button>
            <button class="tab-btn" data-tab="story-generator">Story Gen</button>
            <button class="tab-btn" data-tab="rule-assistant">Rules Help</button>
            <button class="tab-btn" data-tab="combat-tracker">Combat</button>
        </div>
        
        <!-- Dice Roller Tab -->
        <div class="tab-content active" id="dice-roller">
            <main>
                <!-- Quick Roll Section -->
                <section class="section" id="quick-roll-section">
                    <h2>Quick Roll</h2>
                    <div class="quick-roll-container">
                        <div class="quick-roll-input">
                            <input type="number" id="dice-count" min="1" max="100" value="1">
                            <select id="dice-type">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
                                <option value="20">d20</option>
                            </select>
                            <button id="quick-roll-btn" class="btn btn-primary">Roll</button>
                        </div>
                        <div class="modifier-input">
                            <label for="modifier">Modifier:</label>
                            <input type="number" id="modifier" value="0">
                        </div>
                    </div>
                </section>

                <!-- Dice Section -->
                <section class="section" id="dice-section">
                    <h2>Choose Your Dice</h2>
                    <div id="dice-container"></div>
                </section>
                
                <!-- Current Roll Display -->
                <section class="section" id="current-roll-section">
                    <h2>Current Roll</h2>
                    <div id="current-roll">-</div>
                    <div id="results"></div>
                    <div class="roll-details">
                        <div class="roll-breakdown"></div>
                        <div class="roll-total"></div>
                    </div>
                </section>
                
                <!-- Statistics Section -->
                <section class="section" id="statistics">
                    <h2>Roll Statistics</h2>
                    <div class="stats-grid" id="stats-container">
                        <div class="stat-card">
                            <h3>Total Rolls</h3>
                            <p>0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Average</h3>
                            <p>N/A</p>
                        </div>
                        <div class="stat-card">
                            <h3>Highest</h3>
                            <p>0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Lowest</h3>
                            <p>0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Critical Successes</h3>
                            <p>0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Critical Failures</h3>
                            <p>0</p>
                        </div>
                    </div>
                    <div class="dice-distribution">
                        <h3>Dice Distribution</h3>
                        <div class="distribution-chart"></div>
                    </div>
                </section>
                
                <!-- History Section -->
                <section class="section" id="history-section">
                    <h2>Roll History</h2>
                    <div class="history-filters">
                        <select id="history-dice-filter">
                            <option value="all">All Dice</option>
                            <option value="4">d4</option>
                            <option value="6">d6</option>
                            <option value="8">d8</option>
                            <option value="10">d10</option>
                            <option value="12">d12</option>
                            <option value="20">d20</option>
                        </select>
                        <input type="text" id="history-search" placeholder="Search history...">
                    </div>
                    <div id="history"></div>
                    <div class="btn-group">
                        <button id="clear-history" class="btn btn-secondary">Clear History</button>
                        <button id="export-history" class="btn">Export History</button>
                    </div>
                </section>
                
                <!-- Preferences Section -->
                <section class="section" id="preferences">
                    <h2>Preferences</h2>
                    <div class="preferences-grid">
                        <div class="preference-item">
                            <input type="checkbox" id="sound-toggle" checked>
                            <label for="sound-toggle">Sound Effects</label>
                        </div>
                        <div class="preference-item">
                            <input type="checkbox" id="theme-toggle">
                            <label for="theme-toggle">Dark Theme</label>
                        </div>
                        <div class="preference-item">
                            <input type="checkbox" id="animation-toggle" checked>
                            <label for="animation-toggle">Animations</label>
                        </div>
                        <div class="preference-item">
                            <input type="checkbox" id="auto-save-toggle" checked>
                            <label for="auto-save-toggle">Auto-save History</label>
                        </div>
                    </div>
                    <div class="sound-options">
                        <label for="sound-volume">Sound Volume:</label>
                        <input type="range" id="sound-volume" min="0" max="100" value="50">
                    </div>
                </section>
                
                <!-- Save/Share Section -->
                <section class="section" id="save-share">
                    <h2>Save & Share</h2>
                    <div class="btn-group">
                        <button id="save-results" class="btn">Save Results</button>
                        <button id="share-results" class="btn">Share Results</button>
                        <button id="generate-report" class="btn">Generate Report</button>
                    </div>
                </section>
            </main>
        </div>

        <!-- Character Sheet Tab -->
        <div class="tab-content" id="character-sheet">
            <main>
                <!-- Character Info Section -->
                <section class="section" id="character-info">
                    <h2>Character Information</h2>
                    <div class="character-info-grid">
                        <div class="info-group">
                            <label for="characterName">Character Name:</label>
                            <input type="text" id="characterName" placeholder="Enter character name">
                        </div>
                        <div class="info-group">
                            <label for="characterClass">Class:</label>
                            <select id="characterClass">
                                <option value="">Select Class</option>
                                <option value="barbarian">Barbarian</option>
                                <option value="bard">Bard</option>
                                <option value="cleric">Cleric</option>
                                <option value="druid">Druid</option>
                                <option value="fighter">Fighter</option>
                                <option value="monk">Monk</option>
                                <option value="paladin">Paladin</option>
                                <option value="ranger">Ranger</option>
                                <option value="rogue">Rogue</option>
                                <option value="sorcerer">Sorcerer</option>
                                <option value="warlock">Warlock</option>
                                <option value="wizard">Wizard</option>
                            </select>
                        </div>
                        <div class="info-group">
                            <label for="level">Level:</label>
                            <input type="number" id="level" min="1" max="20" value="1">
                        </div>
                        <div class="info-group">
                            <label for="race">Race:</label>
                            <input type="text" id="race" placeholder="Enter race">
                        </div>
                        <div class="info-group">
                            <label for="background">Background:</label>
                            <input type="text" id="background" placeholder="Enter background">
                        </div>
                        <div class="info-group">
                            <label for="alignment">Alignment:</label>
                            <select id="alignment">
                                <option value="">Select Alignment</option>
                                <option value="lg">Lawful Good</option>
                                <option value="ng">Neutral Good</option>
                                <option value="cg">Chaotic Good</option>
                                <option value="ln">Lawful Neutral</option>
                                <option value="nn">True Neutral</option>
                                <option value="cn">Chaotic Neutral</option>
                                <option value="le">Lawful Evil</option>
                                <option value="ne">Neutral Evil</option>
                                <option value="ce">Chaotic Evil</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Combat Stats Section -->
                <section class="section" id="combat-stats">
                    <h2>Combat Statistics</h2>
                    <div class="character-info-grid">
                        <div class="info-group">
                            <label for="armorClass">Armor Class (AC):</label>
                            <input type="number" id="armorClass" min="10" max="30" value="10">
                        </div>
                        <div class="info-group">
                            <label for="hitPoints">Hit Points:</label>
                            <input type="number" id="hitPoints" min="1" max="999" value="8">
                        </div>
                        <div class="info-group">
                            <label for="maxHitPoints">Max Hit Points:</label>
                            <input type="number" id="maxHitPoints" min="1" max="999" value="8">
                        </div>
                        <div class="info-group">
                            <label for="initiative">Initiative Modifier:</label>
                            <input type="number" id="initiative" min="-5" max="10" value="0">
                        </div>
                        <div class="info-group">
                            <label for="speed">Speed:</label>
                            <input type="number" id="speed" min="0" max="120" value="30" placeholder="30 ft">
                        </div>
                        <div class="info-group">
                            <label for="proficiencyBonus">Proficiency Bonus:</label>
                            <input type="number" id="proficiencyBonus" min="2" max="6" value="2" readonly>
                        </div>
                    </div>
                </section>

                <!-- Ability Scores Section -->
                <section class="section" id="ability-scores">
                    <h2>Ability Scores</h2>
                    <div class="ability-scores-grid">
                        <div class="ability-score">
                            <h3>Strength</h3>
                            <div class="score-input">
                                <input type="number" id="str" min="3" max="20" value="10">
                                <div class="modifier" id="str-mod">+0</div>
                            </div>
                            <div class="saving-throw">
                                <input type="checkbox" id="str-save">
                                <label for="str-save">Proficient</label>
                            </div>
                        </div>
                        <div class="ability-score">
                            <h3>Dexterity</h3>
                            <div class="score-input">
                                <input type="number" id="dex" min="3" max="20" value="10">
                                <div class="modifier" id="dex-mod">+0</div>
                            </div>
                            <div class="saving-throw">
                                <input type="checkbox" id="dex-save">
                                <label for="dex-save">Proficient</label>
                            </div>
                        </div>
                        <div class="ability-score">
                            <h3>Constitution</h3>
                            <div class="score-input">
                                <input type="number" id="con" min="3" max="20" value="10">
                                <div class="modifier" id="con-mod">+0</div>
                            </div>
                            <div class="saving-throw">
                                <input type="checkbox" id="con-save">
                                <label for="con-save">Proficient</label>
                            </div>
                        </div>
                        <div class="ability-score">
                            <h3>Intelligence</h3>
                            <div class="score-input">
                                <input type="number" id="int" min="3" max="20" value="10">
                                <div class="modifier" id="int-mod">+0</div>
                            </div>
                            <div class="saving-throw">
                                <input type="checkbox" id="int-save">
                                <label for="int-save">Proficient</label>
                            </div>
                        </div>
                        <div class="ability-score">
                            <h3>Wisdom</h3>
                            <div class="score-input">
                                <input type="number" id="wis" min="3" max="20" value="10">
                                <div class="modifier" id="wis-mod">+0</div>
                            </div>
                            <div class="saving-throw">
                                <input type="checkbox" id="wis-save">
                                <label for="wis-save">Proficient</label>
                            </div>
                        </div>
                        <div class="ability-score">
                            <h3>Charisma</h3>
                            <div class="score-input">
                                <input type="number" id="cha" min="3" max="20" value="10">
                                <div class="modifier" id="cha-mod">+0</div>
                            </div>
                            <div class="saving-throw">
                                <input type="checkbox" id="cha-save">
                                <label for="cha-save">Proficient</label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Skills Section -->
                <section class="section" id="skills">
                    <h2>Skills</h2>
                    <div class="skills-grid">
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="acrobatics">
                                <label for="acrobatics">Acrobatics (Dex)</label>
                            </div>
                            <div class="skill-modifier" id="acrobatics-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="animal-handling">
                                <label for="animal-handling">Animal Handling (Wis)</label>
                            </div>
                            <div class="skill-modifier" id="animal-handling-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="arcana">
                                <label for="arcana">Arcana (Int)</label>
                            </div>
                            <div class="skill-modifier" id="arcana-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="athletics">
                                <label for="athletics">Athletics (Str)</label>
                            </div>
                            <div class="skill-modifier" id="athletics-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="deception">
                                <label for="deception">Deception (Cha)</label>
                            </div>
                            <div class="skill-modifier" id="deception-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="history">
                                <label for="history">History (Int)</label>
                            </div>
                            <div class="skill-modifier" id="history-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="insight">
                                <label for="insight">Insight (Wis)</label>
                            </div>
                            <div class="skill-modifier" id="insight-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="intimidation">
                                <label for="intimidation">Intimidation (Cha)</label>
                            </div>
                            <div class="skill-modifier" id="intimidation-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="investigation">
                                <label for="investigation">Investigation (Int)</label>
                            </div>
                            <div class="skill-modifier" id="investigation-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="medicine">
                                <label for="medicine">Medicine (Wis)</label>
                            </div>
                            <div class="skill-modifier" id="medicine-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="nature">
                                <label for="nature">Nature (Int)</label>
                            </div>
                            <div class="skill-modifier" id="nature-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="perception">
                                <label for="perception">Perception (Wis)</label>
                            </div>
                            <div class="skill-modifier" id="perception-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="performance">
                                <label for="performance">Performance (Cha)</label>
                            </div>
                            <div class="skill-modifier" id="performance-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="persuasion">
                                <label for="persuasion">Persuasion (Cha)</label>
                            </div>
                            <div class="skill-modifier" id="persuasion-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="religion">
                                <label for="religion">Religion (Int)</label>
                            </div>
                            <div class="skill-modifier" id="religion-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="sleight-of-hand">
                                <label for="sleight-of-hand">Sleight of Hand (Dex)</label>
                            </div>
                            <div class="skill-modifier" id="sleight-of-hand-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="stealth">
                                <label for="stealth">Stealth (Dex)</label>
                            </div>
                            <div class="skill-modifier" id="stealth-mod">+0</div>
                        </div>
                        <div class="skill">
                            <div class="skill-header">
                                <input type="checkbox" id="survival">
                                <label for="survival">Survival (Wis)</label>
                            </div>
                            <div class="skill-modifier" id="survival-mod">+0</div>
                        </div>
                    </div>
                </section>

                <!-- Quick Actions Section -->
                <section class="section" id="quick-actions">
                    <h2>Quick Actions</h2>
                    <div class="quick-actions-grid">
                        <div class="action-group">
                            <h3>Ability Checks</h3>
                            <div class="action-buttons">
                                <button class="btn btn-secondary" data-action="str-check">Strength Check</button>
                                <button class="btn btn-secondary" data-action="dex-check">Dexterity Check</button>
                                <button class="btn btn-secondary" data-action="con-check">Constitution Check</button>
                                <button class="btn btn-secondary" data-action="int-check">Intelligence Check</button>
                                <button class="btn btn-secondary" data-action="wis-check">Wisdom Check</button>
                                <button class="btn btn-secondary" data-action="cha-check">Charisma Check</button>
                            </div>
                        </div>
                        <div class="action-group">
                            <h3>Saving Throws</h3>
                            <div class="action-buttons">
                                <button class="btn btn-secondary" data-action="str-save">Strength Save</button>
                                <button class="btn btn-secondary" data-action="dex-save">Dexterity Save</button>
                                <button class="btn btn-secondary" data-action="con-save">Constitution Save</button>
                                <button class="btn btn-secondary" data-action="int-save">Intelligence Save</button>
                                <button class="btn btn-secondary" data-action="wis-save">Wisdom Save</button>
                                <button class="btn btn-secondary" data-action="cha-save">Charisma Save</button>
                            </div>
                        </div>
                        <div class="action-group">
                            <h3>Common Skills</h3>
                            <div class="action-buttons">
                                <button class="btn btn-secondary" data-action="perception">Perception</button>
                                <button class="btn btn-secondary" data-action="stealth">Stealth</button>
                                <button class="btn btn-secondary" data-action="acrobatics">Acrobatics</button>
                                <button class="btn btn-secondary" data-action="athletics">Athletics</button>
                                <button class="btn btn-secondary" data-action="investigation">Investigation</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Equipment & Notes Section -->
                <section class="section" id="equipment-notes">
                    <h2>Equipment & Notes</h2>
                    <div class="character-info-grid">
                        <div class="info-group">
                            <label for="equipment">Equipment & Inventory:</label>
                            <textarea id="equipment" rows="6" placeholder="List your weapons, armor, tools, and other equipment..."></textarea>
                        </div>
                        <div class="info-group">
                            <label for="features">Features & Traits:</label>
                            <textarea id="features" rows="6" placeholder="Class features, racial traits, feats, etc..."></textarea>
                        </div>
                        <div class="info-group">
                            <label for="spells">Spells & Abilities:</label>
                            <textarea id="spells" rows="6" placeholder="Known spells, spell slots, special abilities..."></textarea>
                        </div>
                        <div class="info-group">
                            <label for="notes">Character Notes:</label>
                            <textarea id="notes" rows="6" placeholder="Backstory, personality, goals, relationships..."></textarea>
                        </div>
                    </div>
                </section>

                <!-- Save Character Section -->
                <section class="section" id="save-character">
                    <h2>Save & Load Character</h2>
                    <div class="btn-group">
                        <button id="save-character-btn" class="btn btn-primary" onclick="window.aiEnhanced.saveCharacterSheet()">💾 Save Character</button>
                        <button id="load-character-btn" class="btn" onclick="window.aiEnhanced.loadCharacterSheet()">📂 Load Character</button>
                        <button id="export-character-btn" class="btn" onclick="window.aiEnhanced.exportCharacterSheet()">📄 Export Character</button>
                        <button id="add-to-combat" class="btn btn-secondary" onclick="window.aiEnhanced.addToCombatFromCharacterSheet()">⚔️ Add to Combat</button>
                        <button class="btn" onclick="console.log('Functions available:', Object.keys(window.aiEnhanced)); window.showToast('Check console for debug info', 'info');">🔧 Debug</button>
                    </div>
                </section>
            </main>
        </div>

        <!-- AI DM Assistant Tab -->
        <div class="tab-content" id="ai-dm">
            <main>
                <section class="section" id="ai-dm-chat">
                    <h2>AI Dungeon Master</h2>
                    <div class="ai-chat-container">
                        <div class="chat-messages" id="dm-chat-messages">
                            <div class="system-message">
                                Welcome! I'm your AI Dungeon Master assistant. I can help with:
                                <ul>
                                    <li>Answering D&D rules questions</li>
                                    <li>Creating NPCs and encounters</li>
                                    <li>Generating plot hooks and story ideas</li>
                                    <li>Helping with campaign management</li>
                                    <li>Interpreting dice rolls in context</li>
                                </ul>
                                What would you like help with today?
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <div class="context-tags" id="dm-context-tags">
                                <button class="context-tag" data-context="rules">Rules Question</button>
                                <button class="context-tag" data-context="npc">Create NPC</button>
                                <button class="context-tag" data-context="encounter">Design Encounter</button>
                                <button class="context-tag" data-context="story">Story Help</button>
                                <button class="context-tag" data-context="roll">Interpret Roll</button>
                            </div>
                            <div class="chat-input-wrapper">
                                <textarea id="dm-chat-input" placeholder="Ask your DM anything..." rows="3"></textarea>
                                <button id="dm-send-btn" class="btn btn-primary">Send</button>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Character Generator Tab -->
        <div class="tab-content" id="character-generator">
            <main>
                <section class="section" id="char-gen-options">
                    <h2>AI Character Generator</h2>
                    <div class="char-gen-controls">
                        <div class="gen-options-grid">
                            <div class="gen-option">
                                <label for="gen-class">Preferred Class:</label>
                                <select id="gen-class">
                                    <option value="">Any Class</option>
                                    <option value="barbarian">Barbarian</option>
                                    <option value="bard">Bard</option>
                                    <option value="cleric">Cleric</option>
                                    <option value="druid">Druid</option>
                                    <option value="fighter">Fighter</option>
                                    <option value="monk">Monk</option>
                                    <option value="paladin">Paladin</option>
                                    <option value="ranger">Ranger</option>
                                    <option value="rogue">Rogue</option>
                                    <option value="sorcerer">Sorcerer</option>
                                    <option value="warlock">Warlock</option>
                                    <option value="wizard">Wizard</option>
                                </select>
                            </div>
                            <div class="gen-option">
                                <label for="gen-race">Preferred Race:</label>
                                <select id="gen-race">
                                    <option value="">Any Race</option>
                                    <option value="human">Human</option>
                                    <option value="elf">Elf</option>
                                    <option value="dwarf">Dwarf</option>
                                    <option value="halfling">Halfling</option>
                                    <option value="dragonborn">Dragonborn</option>
                                    <option value="gnome">Gnome</option>
                                    <option value="half-elf">Half-Elf</option>
                                    <option value="half-orc">Half-Orc</option>
                                    <option value="tiefling">Tiefling</option>
                                </select>
                            </div>
                            <div class="gen-option">
                                <label for="gen-level">Level:</label>
                                <input type="number" id="gen-level" min="1" max="20" value="1">
                            </div>
                            <div class="gen-option">
                                <label for="gen-theme">Character Theme:</label>
                                <input type="text" id="gen-theme" placeholder="e.g., mysterious, heroic, comedic">
                            </div>
                        </div>
                        <div class="gen-buttons">
                            <button id="generate-character-btn" class="btn btn-primary">Generate Character</button>
                            <button id="generate-backstory-btn" class="btn">Generate Backstory</button>
                            <button id="roll-stats-btn" class="btn btn-secondary">Roll Stats</button>
                        </div>
                    </div>
                </section>
                
                <section class="section" id="generated-character">
                    <h2>Generated Character</h2>
                    <div id="generated-char-content">
                        <p class="placeholder-text">Click "Generate Character" to create a new character!</p>
                    </div>
                </section>
            </main>
        </div>

        <!-- Story Generator Tab -->
        <div class="tab-content" id="story-generator">
            <main>
                <section class="section" id="story-gen-controls">
                    <h2>AI Story Generator</h2>
                    <div class="story-gen-options">
                        <div class="story-options-grid">
                            <div class="story-option">
                                <label for="story-type">Story Type:</label>
                                <select id="story-type">
                                    <option value="adventure">Adventure Hook</option>
                                    <option value="npc">NPC Generator</option>
                                    <option value="location">Location Description</option>
                                    <option value="encounter">Random Encounter</option>
                                    <option value="quest">Quest Generator</option>
                                    <option value="mystery">Mystery Plot</option>
                                    <option value="dungeon">Dungeon Room</option>
                                </select>
                            </div>
                            <div class="story-option">
                                <label for="story-setting">Setting:</label>
                                <select id="story-setting">
                                    <option value="">Any Setting</option>
                                    <option value="fantasy">High Fantasy</option>
                                    <option value="urban">Urban Fantasy</option>
                                    <option value="dark">Dark Fantasy</option>
                                    <option value="steampunk">Steampunk</option>
                                    <option value="post-apocalyptic">Post-Apocalyptic</option>
                                    <option value="seafaring">Seafaring</option>
                                    <option value="underdark">Underdark</option>
                                </select>
                            </div>
                            <div class="story-option">
                                <label for="story-tone">Tone:</label>
                                <select id="story-tone">
                                    <option value="">Any Tone</option>
                                    <option value="serious">Serious</option>
                                    <option value="lighthearted">Lighthearted</option>
                                    <option value="dark">Dark & Gritty</option>
                                    <option value="mysterious">Mysterious</option>
                                    <option value="heroic">Heroic</option>
                                    <option value="comedic">Comedic</option>
                                </select>
                            </div>
                            <div class="story-option">
                                <label for="party-level">Party Level:</label>
                                <input type="number" id="party-level" min="1" max="20" value="1">
                            </div>
                        </div>
                        <div class="story-custom-prompt">
                            <label for="custom-prompt">Custom Prompt:</label>
                            <textarea id="custom-prompt" placeholder="Describe what kind of story element you want..." rows="3"></textarea>
                        </div>
                        <div class="story-buttons">
                            <button id="generate-story-btn" class="btn btn-primary">Generate Story</button>
                            <button id="generate-names-btn" class="btn">Generate Names</button>
                            <button id="generate-loot-btn" class="btn btn-secondary">Generate Loot</button>
                        </div>
                    </div>
                </section>
                
                <section class="section" id="generated-story">
                    <h2>Generated Content</h2>
                    <div id="generated-story-content">
                        <p class="placeholder-text">Select a story type and click "Generate Story" to begin!</p>
                    </div>
                    <div class="story-actions">
                        <button id="save-story-btn" class="btn" style="display: none;">Save to Campaign</button>
                        <button id="regenerate-btn" class="btn btn-secondary" style="display: none;">Regenerate</button>
                    </div>
                </section>
            </main>
        </div>

        <!-- Rule Assistant Tab -->
        <div class="tab-content" id="rule-assistant">
            <main>
                <section class="section" id="rule-search">
                    <h2>D&D Rules Assistant</h2>
                    <div class="rule-search-container">
                        <div class="quick-rules">
                            <h3>Quick Rule Lookups</h3>
                            <div class="rule-buttons">
                                <button class="rule-btn" data-rule="combat">Combat Rules</button>
                                <button class="rule-btn" data-rule="spellcasting">Spellcasting</button>
                                <button class="rule-btn" data-rule="conditions">Conditions</button>
                                <button class="rule-btn" data-rule="advantage">Advantage/Disadvantage</button>
                                <button class="rule-btn" data-rule="grappling">Grappling</button>
                                <button class="rule-btn" data-rule="stealth">Stealth & Hiding</button>
                                <button class="rule-btn" data-rule="death-saves">Death Saves</button>
                                <button class="rule-btn" data-rule="multiattack">Multiattack</button>
                            </div>
                        </div>
                        <div class="rule-query">
                            <h3>Ask About Any Rule</h3>
                            <div class="rule-input-container">
                                <textarea id="rule-question" placeholder="Ask any D&D rules question..." rows="3"></textarea>
                                <button id="ask-rule-btn" class="btn btn-primary">Ask</button>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="section" id="rule-response">
                    <h2>Rule Explanation</h2>
                    <div id="rule-answer">
                        <p class="placeholder-text">Click a quick rule button or ask a specific question!</p>
                    </div>
                </section>
            </main>
        </div>

        <!-- Combat Tracker Tab -->
        <div class="tab-content" id="combat-tracker">
            <main>
                <section class="section" id="combat-setup">
                    <h2>Combat Tracker</h2>
                    <div class="combat-controls">
                        <div class="combat-buttons">
                            <button id="start-combat-btn" class="btn btn-primary">Start Combat</button>
                            <button id="next-turn-btn" class="btn" disabled>Next Turn</button>
                            <button id="end-combat-btn" class="btn btn-secondary" disabled>End Combat</button>
                        </div>
                        <div class="round-counter">
                            <span>Round: <span id="current-round">0</span></span>
                        </div>
                    </div>
                </section>

                <section class="section" id="add-combatant">
                    <h2>Add Combatant</h2>
                    <div class="combatant-form">
                        <div class="form-row">
                            <input type="text" id="combatant-name" placeholder="Name">
                            <input type="number" id="combatant-initiative" placeholder="Initiative" min="1" max="30">
                            <input type="number" id="combatant-hp" placeholder="HP" min="1">
                            <input type="number" id="combatant-ac" placeholder="AC" min="1">
                        </div>
                        <div class="form-row">
                            <select id="combatant-type">
                                <option value="player">Player</option>
                                <option value="enemy">Enemy</option>
                                <option value="ally">Ally</option>
                            </select>
                            <button id="add-combatant-btn" class="btn btn-primary">Add</button>
                            <button id="generate-enemy-btn" class="btn btn-secondary">Generate Enemy</button>
                        </div>
                    </div>
                </section>

                <section class="section" id="initiative-tracker">
                    <h2>Initiative Order</h2>
                    <div id="combatants-list">
                        <p class="placeholder-text">Add combatants to begin tracking initiative!</p>
                    </div>
                </section>

                <section class="section" id="combat-actions">
                    <h2>Quick Combat Actions</h2>
                    <div class="combat-action-buttons">
                        <button class="action-btn" data-action="attack">Roll Attack</button>
                        <button class="action-btn" data-action="damage">Roll Damage</button>
                        <button class="action-btn" data-action="heal">Heal</button>
                        <button class="action-btn" data-action="condition">Add Condition</button>
                        <button class="action-btn" data-action="save">Saving Throw</button>
                    </div>
                </section>
            </main>
        </div>
        
        <!-- Theme Toggle Button -->
        <button id="theme-toggle-btn" class="theme-toggle" aria-label="Toggle theme">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
            </svg>
        </button>
        
        <!-- Audio Elements -->
        <audio id="roll-sound" src="sounds/roll.mp3" preload="auto"></audio>
        <audio id="crit-success-sound" src="sounds/crit-success.mp3" preload="auto"></audio>
        <audio id="crit-fail-sound" src="sounds/crit-fail.mp3" preload="auto"></audio>
        
        <!-- Toast Notifications -->
        <div id="toast-container"></div>
        
        <script src="script.js"></script>
        <script src="ai-enhanced.js"></script>
    </div>
</body>
</html>