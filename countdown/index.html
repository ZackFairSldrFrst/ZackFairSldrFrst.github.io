<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown to Seeing Alvin</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Counting Down to See Alvin</h1>
        <div class="countdown-container">
            <div class="countdown-item">
                <span id="days">00</span>
                <span class="label">Days</span>
            </div>
            <div class="countdown-item">
                <span id="hours">00</span>
                <span class="label">Hours</span>
            </div>
            <div class="countdown-item">
                <span id="minutes">00</span>
                <span class="label">Minutes</span>
            </div>
            <div class="countdown-item">
                <span id="seconds">00</span>
                <span class="label">Seconds</span>
            </div>
        </div>

        <div class="quests-container">
            <h2>Daily Quests</h2>
            <div id="quests-list">
                <!-- Quests will be populated by JavaScript -->
            </div>
        </div>

        <a href="../index.html" class="back-button">Back to Home</a>
    </div>

    <script>
        // Set the target date (July 2, 2025, 11:45 AM PT)
        const targetDate = new Date('2025-07-02T11:45:00-07:00');

        const dailyQuests = [
            "Send Alvin a cute good morning message",
            "Share a photo of your day",
            "Tell Alvin something you're grateful for",
            "Send a voice message",
            "Share a song that reminds you of them"
        ];

        function updateCountdown() {
            const now = new Date();
            const difference = targetDate - now;

            if (difference < 0) {
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
                return;
            }

            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = String(days).padStart(2, '0');
            document.getElementById('hours').textContent = String(hours).padStart(2, '0');
            document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
            document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
        }

        function loadQuests() {
            const questsList = document.getElementById('quests-list');
            const today = new Date().toDateString();
            
            // Get completed quests from Chrome storage
            chrome.storage.local.get(['completedQuests', 'lastReset'], function(result) {
                let completedQuests = result.completedQuests || {};
                const lastReset = result.lastReset;

                // Reset quests if it's a new day
                if (lastReset !== today) {
                    completedQuests = {};
                    chrome.storage.local.set({ 
                        completedQuests: completedQuests,
                        lastReset: today
                    });
                }

                // Create quest elements
                dailyQuests.forEach((quest, index) => {
                    const questElement = document.createElement('div');
                    questElement.className = 'quest-item';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `quest-${index}`;
                    checkbox.checked = completedQuests[index] || false;
                    
                    checkbox.addEventListener('change', function() {
                        completedQuests[index] = this.checked;
                        chrome.storage.local.set({ completedQuests: completedQuests });
                    });

                    const label = document.createElement('label');
                    label.htmlFor = `quest-${index}`;
                    label.textContent = quest;

                    questElement.appendChild(checkbox);
                    questElement.appendChild(label);
                    questsList.appendChild(questElement);
                });
            });
        }

        // Update countdown every second
        setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call
        loadQuests(); // Load quests
    </script>
</body>
</html> 